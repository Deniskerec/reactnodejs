{"ast":null,"code":"import _toConsumableArray from\"/home/denis/Documents/reactnodejs/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/denis/Documents/reactnodejs/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from'react';import Context from'../utils/context';import{Link}from'react-router-dom';import axios from'axios';import history from'../utils/history';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';var ShowMessages=function ShowMessages(props){var context=useContext(Context);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];useEffect(function(){var username=context.dbProfileState[0].username;axios.get('/api/get/usermessages',{params:{username:username}}).then(function(res){return setMessages(_toConsumableArray(res.data));}).catch(function(error){console.log(error);});},[]);//eslint-disable-line\nvar RenderMessages=function RenderMessages(props){return React.createElement(TableRow,null,React.createElement(TableCell,null,React.createElement(\"p\",null,\" \",React.createElement(\"strong\",null,\"From: \"),\"  \",props.message.message_sender,\" \"),React.createElement(\"p\",null,\" \",React.createElement(\"strong\",null,\"Title \"),\"   \",props.message.message_title,\" \"),React.createElement(\"p\",null,React.createElement(\"strong\",null,\" Message:\"),\"  \",props.message.message_body,\" \"),React.createElement(\"small\",null,\" \",props.message.date_created,\" \"),React.createElement(\"br\",null),React.createElement(Link,{to:{pathname:\"/replytomessage\",state:{props:props}}},React.createElement(\"button\",null,\"Reply\")),React.createElement(\"button\",{onClick:function onClick(){return DeleteMessage(props.message.mid);}},\" Delete \"),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"button\",{onClick:function onClick(){return history.goBack();}},\" Cancel \")));};var DeleteMessage=function DeleteMessage(mid){axios.delete('/api/delete/usermessage',{data:{mid:mid}}).then(function(res){return console.log(res);}).catch(function(error){console.log(error);}).then(function(){return setTimeout(function(){history.replace('/');},700);});};return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"FlexRow\"},React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableCell,null,\" \",React.createElement(\"strong\",null,\" Messages \"),\" \"))),React.createElement(TableBody,null,messages?messages.map(function(message){return React.createElement(RenderMessages,{key:message.mid,message:message});}):null))));};export default ShowMessages;","map":{"version":3,"sources":["/home/denis/Documents/reactnodejs/Client/src/Profile/showmessages.js"],"names":["React","useContext","useState","useEffect","Context","Link","axios","history","Table","TableBody","TableCell","TableHead","TableRow","ShowMessages","props","context","messages","setMessages","username","dbProfileState","get","params","then","res","data","catch","error","console","log","RenderMessages","message","message_sender","message_title","message_body","date_created","pathname","state","DeleteMessage","mid","goBack","delete","setTimeout","replace","map"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport Context from '../utils/context';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport axios from 'axios';\r\nimport history from '../utils/history';\r\n\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\n\r\nconst ShowMessages = (props) => {\r\n  const context = useContext(Context)\r\n\r\n  const [messages, setMessages] = useState([])\r\n\r\n  useEffect(() => {\r\n    const username = context.dbProfileState[0].username\r\n    axios.get('/api/get/usermessages', {params: {username: username}})\r\n      .then(res =>  setMessages([...res.data]))\r\n      .catch(function (error) {\r\n          console.log(error);\r\n        })\r\n   }, [] )  //eslint-disable-line\r\n\r\n   const RenderMessages = (props) => (\r\n     <TableRow>\r\n         <TableCell>\r\n           <p> <strong>From: </strong>  {props.message.message_sender} </p>\r\n           <p> <strong>Title </strong>   { props.message.message_title } </p>\r\n           <p><strong> Message:</strong>  { props.message.message_body } </p>\r\n           <small> { props.message.date_created } </small>\r\n           <br />\r\n           <Link to={{pathname:\"/replytomessage\", state:{props} }}>\r\n               <button>\r\n                  Reply\r\n               </button>\r\n            </Link>\r\n           <button onClick={() => DeleteMessage(props.message.mid)}> Delete </button>\r\n           <br />\r\n           <br />\r\n           <button onClick={() => history.goBack()}> Cancel </button>\r\n        </TableCell>\r\n       </TableRow>\r\n   )\r\n\r\n  const DeleteMessage = (mid) => {\r\n    axios.delete('/api/delete/usermessage', { data: { mid: mid }})\r\n    .then(res => console.log(res))\r\n    .catch(function (error) {\r\n        console.log(error);\r\n      })\r\n     .then(() => setTimeout( function() { history.replace('/') }, 700))\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className='FlexRow'>\r\n      <Table>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell> <strong> Messages </strong> </TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          { messages\r\n            ? messages.map( message =>\r\n              <RenderMessages key={message.mid} message={message} />\r\n            )\r\n            : null\r\n          }\r\n         </TableBody>\r\n        </Table>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default (ShowMessages);\r\n"]},"metadata":{},"sourceType":"module"}