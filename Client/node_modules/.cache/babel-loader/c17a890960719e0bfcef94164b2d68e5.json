{"ast":null,"code":"import _toConsumableArray from\"/home/denis/Documents/reactnodejs/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/denis/Documents/reactnodejs/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/denis/Documents/reactnodejs/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from'react';import Context from'../utils/context';import{Link}from'react-router-dom';import history from'../utils/history';import axios from'axios';import Card from'@material-ui/core/Card';import CardContent from'@material-ui/core/CardContent';import CardHeader from'@material-ui/core/CardHeader';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';import Button from'@material-ui/core/Button';var Profile=function Profile(){var context=useContext(Context);var _useState=useState({open:false,post_id:null,posts:[]}),_useState2=_slicedToArray(_useState,2),stateLocal=_useState2[0],setState=_useState2[1];useEffect(function(){var user_id=context.dbProfileState[0].uid;axios.get('/api/get/userposts',{params:{user_id:user_id}}).then(function(res){return setState(_objectSpread({},stateLocal,{posts:_toConsumableArray(res.data)}));}).catch(function(err){return console.log(err);});});var handleClickOpen=function handleClickOpen(pid){setState({open:true,post_id:pid});};var handleClickClose=function handleClickClose(){setState({open:false,post_id:null});};var DeletePost=function DeletePost(){var post_id=stateLocal.post_id;axios.delete('api/delete/postcomments',{data:{post_id:post_id}}).then(function(){return axios.delete('/api/delete/post',{data:{post_id:post_id}}).then(function(res){return console.log(res);});}).catch(function(err){return console.log(err);}).then(function(){return handleClickClose();}).then(function(){return setTimeout(function(){return history.replace('/');},700);});};var RenderProfile=function RenderProfile(props){return React.createElement(\"div\",null,React.createElement(\"h1\",null,props.profile.profile.nickname),React.createElement(\"br\",null),React.createElement(\"img\",{src:props.profile.profile.picture,alt:\"\"}),React.createElement(\"br\",null),React.createElement(\"h4\",null,\" \",props.profile.profile.email),React.createElement(\"br\",null),React.createElement(\"h5\",null,\" \",props.profile.profile.name,\" \"),React.createElement(\"br\",null),React.createElement(\"h6\",null,\" Email Verified: \"),props.profile.profile.email_verified?React.createElement(\"p\",null,\"Yes\"):React.createElement(\"p\",null,\"No\"),React.createElement(\"br\",null));};var RenderPosts=function RenderPosts(post){return React.createElement(Card,{style:{width:'500px',height:'200px',marginBottom:'10px',paddingBottom:'80px'}},React.createElement(CardHeader,{title:React.createElement(Link,{to:{pathname:'/post/'+post.post.pid,state:{post:post}}},post.post.title),subheader:React.createElement(\"div\",{className:\"FlexColumn\"},React.createElement(\"div\",{className:\"FlexRow\"},post.post.date_created),React.createElement(\"div\",{className:\"FlexRow\"},React.createElement(Link,{to:{pathname:'/editpost/'+post.post.pid,state:{post:post}}},React.createElement(\"button\",null,\"Edit\")),React.createElement(\"button\",{onClick:function onClick(){return handleClickOpen(post.post.pid);}},\"Delete\")))}),React.createElement(\"br\",null),React.createElement(CardContent,null,React.createElement(\"span\",{style:{overflow:'hidden'}},\" \",post.post.body,\" \")));};return React.createElement(\"div\",null,React.createElement(\"div\",null,React.createElement(Link,{to:{pathname:\"/showmessages/\"+context.dbProfileState[0].uid}},React.createElement(Button,{variant:\"contained\",color:\"primary\",type:\"submit\"},\"Show Messages\")),React.createElement(RenderProfile,{profile:context.profileState})),React.createElement(\"div\",null,stateLocal.posts?stateLocal.posts.map(function(post){return React.createElement(RenderPosts,{post:post,key:post.pid});}):null),React.createElement(Dialog,{open:stateLocal.open,onClose:handleClickClose,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\"},React.createElement(DialogTitle,{id:\"alert-dialog-title\"},\" Confirm Delete? \"),React.createElement(DialogContent,null,React.createElement(DialogContentText,{id:\"alert-dialog-description\"},\"Deleteing Post\"),React.createElement(DialogActions,null,React.createElement(Button,{onClick:function onClick(){return DeletePost();}},\"Agree\"),React.createElement(Button,{onClick:function onClick(){return handleClickClose();}},\"Cancel\")))));};export default Profile;","map":{"version":3,"sources":["/home/denis/Documents/reactnodejs/Client/src/Profile/profile.js"],"names":["React","useContext","useState","useEffect","Context","Link","history","axios","Card","CardContent","CardHeader","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Button","Profile","context","open","post_id","posts","stateLocal","setState","user_id","dbProfileState","uid","get","params","then","res","data","catch","err","console","log","handleClickOpen","pid","handleClickClose","DeletePost","delete","setTimeout","replace","RenderProfile","props","profile","nickname","picture","email","name","email_verified","RenderPosts","post","width","height","marginBottom","paddingBottom","pathname","state","title","date_created","overflow","body","profileState","map"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport Context from '../utils/context';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport history from '../utils/history';\r\nimport axios from 'axios';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\n\r\n\r\nconst Profile = () => {\r\n  const context = useContext(Context)\r\n\r\n  const [stateLocal, setState] = useState({ open: false,\r\n                                            post_id: null,\r\n                                            posts: []\r\n                                          })\r\n\r\n  useEffect(() => {\r\n    const user_id = context.dbProfileState[0].uid\r\n    axios.get('/api/get/userposts', {params: { user_id: user_id}})\r\n      .then((res) => setState({...stateLocal, posts: [...res.data] }))\r\n      .catch((err) => console.log(err))\r\n  })\r\n\r\n  const handleClickOpen = (pid) => {\r\n    setState({open: true, post_id: pid })\r\n  }\r\n\r\n  const handleClickClose = () => {\r\n    setState({open: false, post_id: null })\r\n  }\r\n\r\n  const DeletePost = () => {\r\n    const post_id = stateLocal.post_id\r\n    axios.delete('api/delete/postcomments', {data: { post_id: post_id }} )\r\n      .then(() => axios.delete('/api/delete/post', {data: { post_id: post_id }} )\r\n          .then(res => console.log(res) ) )\r\n      .catch(err => console.log(err))\r\n      .then(() => handleClickClose())\r\n      .then(() => setTimeout(() => history.replace('/'), 700 ) )\r\n  }\r\n\r\n  const RenderProfile = (props) => {\r\n    return(\r\n      <div>\r\n        <h1>{props.profile.profile.nickname}</h1>\r\n        <br />\r\n        <img src={props.profile.profile.picture} alt=\"\" />\r\n        <br />\r\n        <h4> {props.profile.profile.email}</h4>\r\n        <br />\r\n        <h5> {props.profile.profile.name} </h5>\r\n        <br />\r\n        <h6> Email Verified: </h6>\r\n        {props.profile.profile.email_verified ? <p>Yes</p> : <p>No</p> }\r\n        <br />\r\n      </div>\r\n\r\n     )\r\n   }\r\n\r\n  const RenderPosts = post => (\r\n    <Card style={{width: '500px', height: '200px', marginBottom: '10px', paddingBottom: '80px' }}>\r\n      <CardHeader\r\n        title={<Link to={{pathname:'/post/' + post.post.pid, state: {post}}}>\r\n                  {post.post.title}\r\n                </Link> }\r\n        subheader={\r\n            <div className=\"FlexColumn\">\r\n              <div className=\"FlexRow\">\r\n                {post.post.date_created}\r\n              </div>\r\n              <div className=\"FlexRow\">\r\n                <Link to={{pathname:'/editpost/' + post.post.pid, state:{post} }}>\r\n                  <button>\r\n                   Edit\r\n                  </button>\r\n                </Link>\r\n                <button onClick={() => handleClickOpen(post.post.pid) }>\r\n                 Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n            }\r\n          />\r\n      <br />\r\n      <CardContent>\r\n        <span style={{overflow: 'hidden' }}> {post.post.body} </span>\r\n      </CardContent>\r\n\r\n    </Card>\r\n  );\r\n\r\n\r\n      return(\r\n          <div>\r\n            <div>\r\n            <Link to={{pathname:\"/showmessages/\" + context.dbProfileState[0].uid }}>\r\n             <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n               Show Messages\r\n              </Button>\r\n            </Link>\r\n            <RenderProfile profile={context.profileState} />\r\n            </div>\r\n            <div>\r\n              {stateLocal.posts\r\n                ? stateLocal.posts.map(post =>\r\n                  <RenderPosts post={post} key={post.pid} /> )\r\n                : null }\r\n            </div>\r\n            <Dialog\r\n              open={stateLocal.open}\r\n              onClose={handleClickClose}\r\n              aria-labelledby=\"alert-dialog-title\"\r\n              aria-describedby=\"alert-dialog-description\"\r\n            >\r\n              <DialogTitle id=\"alert-dialog-title\"> Confirm Delete? </DialogTitle>\r\n                <DialogContent>\r\n                  <DialogContentText\r\n                    id=\"alert-dialog-description\"\r\n                    >\r\n                      Deleteing Post\r\n                    </DialogContentText>\r\n                    <DialogActions>\r\n                      <Button onClick={() => DeletePost() }>\r\n                        Agree\r\n                      </Button>\r\n                      <Button onClick={() => handleClickClose()}>\r\n                        Cancel\r\n                      </Button>\r\n                  </DialogActions>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n          </div>\r\n  )}\r\n\r\n\r\n\r\nexport default (Profile);\r\n"]},"metadata":{},"sourceType":"module"}