{"ast":null,"code":"import React,{useEffect,useContext}from'react';import history from'./history';import Context from'./context';import axios from'axios';var AuthCheck=function AuthCheck(){var context=useContext(Context);useEffect(function(){if(context.authObj.isAuthenticated()){var profile=context.authObj.userProfile;context.handleUserLogin();context.handleUserAddProfile(profile);axios.post('/api/posts/userprofiletodb',profile).then(axios.get('/api/get/userprofilefromdb',{params:{email:profile.profile.email}}).then(function(res){return context.handleAddDBProfile(res.data);})).then(history.replace('/'));}else{context.handleUserLogout();context.handleUserRemoveProfile();context.handleUserRemoveProfile();history.replace('/');}},[context.authObj.userProfile,context]);return React.createElement(\"div\",null);};export default AuthCheck;","map":{"version":3,"sources":["/home/denis/Documents/reactnodejs/Client/src/utils/authcheck.js"],"names":["React","useEffect","useContext","history","Context","axios","AuthCheck","context","authObj","isAuthenticated","profile","userProfile","handleUserLogin","handleUserAddProfile","post","then","get","params","email","res","handleAddDBProfile","data","replace","handleUserLogout","handleUserRemoveProfile"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,UAA3B,KAA6C,OAA7C,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,GAAMC,CAAAA,OAAO,CAAGL,UAAU,CAACE,OAAD,CAA1B,CAGAH,SAAS,CAAC,UAAM,CACd,GAAGM,OAAO,CAACC,OAAR,CAAgBC,eAAhB,EAAH,CAAsC,CACpC,GAAMC,CAAAA,OAAO,CAAGH,OAAO,CAACC,OAAR,CAAgBG,WAAhC,CACAJ,OAAO,CAACK,eAAR,GACAL,OAAO,CAACM,oBAAR,CAA6BH,OAA7B,EACCL,KAAK,CAACS,IAAN,CAAW,4BAAX,CAAyCJ,OAAzC,EACEK,IADF,CACOV,KAAK,CAACW,GAAN,CAAU,4BAAV,CAAwC,CAACC,MAAM,CAAE,CAACC,KAAK,CAAER,OAAO,CAACA,OAAR,CAAgBQ,KAAxB,CAAT,CAAxC,EACHH,IADG,CACE,SAAAI,GAAG,QAAIZ,CAAAA,OAAO,CAACa,kBAAR,CAA2BD,GAAG,CAACE,IAA/B,CAAJ,EADL,CADP,EAGEN,IAHF,CAGOZ,OAAO,CAACmB,OAAR,CAAgB,GAAhB,CAHP,EAIF,CARD,IASK,CACHf,OAAO,CAACgB,gBAAR,GACAhB,OAAO,CAACiB,uBAAR,GACAjB,OAAO,CAACiB,uBAAR,GACArB,OAAO,CAACmB,OAAR,CAAgB,GAAhB,EACC,CACF,CAhBM,CAgBJ,CAACf,OAAO,CAACC,OAAR,CAAgBG,WAAjB,CAA8BJ,OAA9B,CAhBI,CAAT,CAkBE,MACI,gCADJ,CAGE,CAzBN,CA8BA,cAAeD,CAAAA,SAAf","sourcesContent":["import React, { useEffect, useContext } from 'react';\r\nimport history from './history';\r\nimport Context from './context';\r\n\r\nimport axios from 'axios';\r\n\r\nconst AuthCheck = () => {\r\n  const context = useContext(Context)\r\n\r\n\r\n  useEffect(() => {\r\n    if(context.authObj.isAuthenticated()) {\r\n      const profile = context.authObj.userProfile\r\n      context.handleUserLogin()\r\n      context.handleUserAddProfile(profile)\r\n       axios.post('/api/posts/userprofiletodb', profile )\r\n        .then(axios.get('/api/get/userprofilefromdb', {params: {email: profile.profile.email}})\r\n          .then(res => context.handleAddDBProfile(res.data)) )\r\n        .then(history.replace('/') )\r\n    }\r\n    else {\r\n      context.handleUserLogout()\r\n      context.handleUserRemoveProfile()\r\n      context.handleUserRemoveProfile()\r\n      history.replace('/')\r\n      }\r\n    }, [context.authObj.userProfile, context])\r\n\r\n    return(\r\n        <div>\r\n        </div>\r\n    )}\r\n\r\n\r\n\r\n\r\nexport default AuthCheck;\r\n"]},"metadata":{},"sourceType":"module"}