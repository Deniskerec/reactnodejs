{"ast":null,"code":"import _toConsumableArray from\"/home/denis/Documents/reactnodejs/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/denis/Documents/reactnodejs/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/denis/Documents/reactnodejs/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{Link}from'react-router-dom';import axios from'axios';import moment from'moment';import Context from'../utils/context';import Button from'@material-ui/core/Button';import TextField from'@material-ui/core/TextField';import Card from\"@material-ui/core/Card\";import CardContent from\"@material-ui/core/CardContent\";import CardHeader from\"@material-ui/core/CardHeader\";import'../App.css';import'../styles/pagination.css';var Posts=function Posts(props){var context=useContext(Context);var _useState=useState({posts:[],fetched:false,first_page_load:false,pages_slice:[1,2,3,4,5],max_page:null,items_per_page:3,currentPage:1,num_posts:null,posts_slice:null,posts_search:[],posts_per_page:3}),_useState2=_slicedToArray(_useState,2),stateLocal=_useState2[0],setState=_useState2[1];useEffect(function(){if(!context.postsState){axios.get('/api/get/allposts').then(function(res){return context.handleAddPosts(res.data);}).catch(function(err){return console.log(err);});}if(context.postsState&&!stateLocal.fetched){var indexOfLastPost=1*stateLocal.posts_per_page;var indexOfFirstPost=indexOfLastPost-stateLocal.posts_per_page;var last_page=Math.ceil(context.postsState.length/stateLocal.posts_per_page);setState(_objectSpread({},stateLocal,{fetched:true,posts:_toConsumableArray(context.postsState),num_posts:context.postsState.length,max_page:last_page,posts_slice:context.postsState.slice(indexOfFirstPost,indexOfLastPost)}));}},[context,stateLocal]);useEffect(function(){var page=stateLocal.currentPage;var indexOfLastPost=page*3;var indexOfFirstPost=indexOfLastPost-3;setState(_objectSpread({},stateLocal,{posts_slice:stateLocal.posts.slice(indexOfFirstPost,indexOfLastPost)}));},[stateLocal.currentPage]);//eslint-disable-line\nvar add_search_posts_to_state=function add_search_posts_to_state(posts){setState(_objectSpread({},stateLocal,{posts_search:[]}));setState(_objectSpread({},stateLocal,{posts_search:_toConsumableArray(posts)}));};var handleSearch=function handleSearch(event){setState(_objectSpread({},stateLocal,{posts_search:[]}));var search_query=event.target.value;axios.get('/api/get/searchpost',{params:{search_query:search_query}}).then(function(res){return res.data.length!==0?add_search_posts_to_state(res.data):null;}).catch(function(error){console.log(error);});};var RenderPosts=function RenderPosts(post){return React.createElement(\"div\",null,React.createElement(Card,null,React.createElement(CardHeader,{title:React.createElement(Link,{to:{pathname:'/post/'+post.post.pid,state:{post:post}}},post.post.title),subheader:React.createElement(\"div\",{className:\"FlexColumn\"},React.createElement(\"div\",{className:\"FlexRow\"},moment(post.post.date_created).format('MMMM Do, YYYY | h:mm a')),React.createElement(\"div\",{className:\"FlexRow\"},\"By:\",React.createElement(Link,{style:{paddingLeft:'5px',textDecoration:'none'},to:{pathname:\"/user/\"+post.post.author,state:{post:post}}},post.post.author)),React.createElement(\"div\",{className:\"FlexRow\"},React.createElement(\"i\",{className:\"material-icons\"},\"thumb_up\"),React.createElement(\"div\",{className:\"notification-num-allposts\"},\" \",post.post.likes,\" \")))}),React.createElement(\"br\",null),React.createElement(CardContent,null,React.createElement(\"span\",{style:{overflow:'hidden'}},\" \",post.post.body,\" \"))));};var page_change=function page_change(page){window.scrollTo({top:0,left:0,behavior:'smooth'});//variables for page change\nvar next_page=page+1;var prev_page=page-1;//handles general page change\n//if(state.max_page < 5 return null)\nif(page>2&&page<stateLocal.max_page-1){setState(_objectSpread({},stateLocal,{currentPage:page,pages_slice:[prev_page-1,prev_page,page,next_page,next_page+1]}));}if(page===2){setState(_objectSpread({},stateLocal,{currentPage:page,pages_slice:[prev_page,page,next_page,next_page+1,next_page+2]}));}//handles use case for user to go back to first page from another page\nif(page===1){setState(_objectSpread({},stateLocal,{currentPage:page,pages_slice:[page,next_page,next_page+1,next_page+2,next_page+3]}));}//handles last page change\nif(page===stateLocal.max_page){setState(_objectSpread({},stateLocal,{currentPage:page,pages_slice:[prev_page-3,prev_page-2,prev_page-1,prev_page,page]}));}if(page===stateLocal.max_page-1){setState(_objectSpread({},stateLocal,{currentPage:page,pages_slice:[prev_page-2,prev_page-1,prev_page,page,next_page]}));}};return React.createElement(\"div\",null,React.createElement(\"div\",{style:{opacity:stateLocal.opacity,transition:'opacity 2s ease'}},React.createElement(\"br\",null),context.authState?React.createElement(Link,{to:\"/addpost\"},React.createElement(Button,{variant:\"contained\",color:\"primary\"},\"Add Post\")):React.createElement(Link,{to:\"/signup\"},React.createElement(Button,{variant:\"contained\",color:\"primary\"},\"Sign Up to Add Post\"))),React.createElement(\"br\",null),React.createElement(TextField,{id:\"search\",label:\"Search\",margin:\"normal\",onChange:handleSearch}),React.createElement(\"hr\",null),React.createElement(\"button\",{onClick:function onClick(){return console.log(stateLocal);}},\" Button \"),React.createElement(\"button\",{onClick:function onClick(){return console.log(context);}},\" Button \"),React.createElement(\"br\",null),React.createElement(\"div\",null,stateLocal.posts_search?stateLocal.posts_search.map(function(post){return React.createElement(RenderPosts,{key:post.pid+1000,post:post});}):null),React.createElement(\"h1\",null,\"Posts\"),React.createElement(\"div\",null,stateLocal.posts_slice?stateLocal.posts_slice.map(function(post){return React.createElement(RenderPosts,{key:post.pid,post:post});}):null),React.createElement(\"div\",null,React.createElement(\"div\",{className:\"FlexRow\"},React.createElement(\"button\",{onClick:function onClick(){return page_change(1);}},\" First \"),React.createElement(\"button\",{onClick:function onClick(){return page_change(stateLocal.currentPage-1);}},\" Prev \"),stateLocal.pages_slice.map(function(page){return React.createElement(\"div\",{onClick:function onClick(){return page_change(page);},className:stateLocal.currentPage===page?\"pagination-active\":\"pagination-item\",key:page},page);}),React.createElement(\"button\",{onClick:function onClick(){return page_change(stateLocal.currentPage+1);}},\" Next \"),React.createElement(\"button\",{onClick:function onClick(){return page_change(stateLocal.max_page);}},\" Last \"))));};export default Posts;","map":{"version":3,"sources":["/home/denis/Documents/reactnodejs/Client/src/Blog/posts.js"],"names":["React","useContext","useEffect","useState","Link","axios","moment","Context","Button","TextField","Card","CardContent","CardHeader","Posts","props","context","posts","fetched","first_page_load","pages_slice","max_page","items_per_page","currentPage","num_posts","posts_slice","posts_search","posts_per_page","stateLocal","setState","postsState","get","then","res","handleAddPosts","data","catch","err","console","log","indexOfLastPost","indexOfFirstPost","last_page","Math","ceil","length","slice","page","add_search_posts_to_state","handleSearch","event","search_query","target","value","params","error","RenderPosts","post","pathname","pid","state","title","date_created","format","paddingLeft","textDecoration","author","likes","overflow","body","page_change","window","scrollTo","top","left","behavior","next_page","prev_page","opacity","transition","authState","map"],"mappings":"oeAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CAEA,OAASC,IAAT,KAAqB,kBAArB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CAEA,MAAO,YAAP,CACA,MAAO,0BAAP,CAKA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,CACzB,GAAMC,CAAAA,OAAO,CAAGd,UAAU,CAACM,OAAD,CAA1B,CADyB,cAIMJ,QAAQ,CAAC,CAAEa,KAAK,CAAE,EAAT,CACEC,OAAO,CAAE,KADX,CAEEC,eAAe,CAAE,KAFnB,CAGEC,WAAW,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,CAAb,CAHf,CAIEC,QAAQ,CAAE,IAJZ,CAKEC,cAAc,CAAE,CALlB,CAOEC,WAAW,CAAE,CAPf,CAQEC,SAAS,CAAE,IARb,CASEC,WAAW,CAAE,IATf,CAUEC,YAAY,CAAE,EAVhB,CAWEC,cAAc,CAAE,CAXlB,CAAD,CAJd,wCAIlBC,UAJkB,eAINC,QAJM,eAmBvB1B,SAAS,CAAC,UAAM,CACf,GAAG,CAACa,OAAO,CAACc,UAAZ,CAAwB,CACrBxB,KAAK,CAACyB,GAAN,CAAU,mBAAV,EACGC,IADH,CACQ,SAAAC,GAAG,QAAIjB,CAAAA,OAAO,CAACkB,cAAR,CAAuBD,GAAG,CAACE,IAA3B,CAAJ,EADX,EAEGC,KAFH,CAES,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAFT,EAGC,CACH,GAAIrB,OAAO,CAACc,UAAR,EAAsB,CAACF,UAAU,CAACV,OAAtC,CAA+C,CAC7C,GAAMsB,CAAAA,eAAe,CAAG,EAAIZ,UAAU,CAACD,cAAvC,CACA,GAAMc,CAAAA,gBAAgB,CAAGD,eAAe,CAAGZ,UAAU,CAACD,cAAtD,CACA,GAAMe,CAAAA,SAAS,CAAGC,IAAI,CAACC,IAAL,CAAU5B,OAAO,CAACc,UAAR,CAAmBe,MAAnB,CAA0BjB,UAAU,CAACD,cAA/C,CAAlB,CAEAE,QAAQ,kBAAKD,UAAL,EACEV,OAAO,CAAE,IADX,CAEED,KAAK,oBAAMD,OAAO,CAACc,UAAd,CAFP,CAGEN,SAAS,CAAER,OAAO,CAACc,UAAR,CAAmBe,MAHhC,CAIExB,QAAQ,CAAEqB,SAJZ,CAKEjB,WAAW,CAAET,OAAO,CAACc,UAAR,CAAmBgB,KAAnB,CAAyBL,gBAAzB,CACyBD,eADzB,CALf,GAAR,CAQC,CACF,CApBM,CAoBJ,CAACxB,OAAD,CAAUY,UAAV,CApBI,CAAT,CAuBAzB,SAAS,CAAC,UAAM,CACd,GAAI4C,CAAAA,IAAI,CAAGnB,UAAU,CAACL,WAAtB,CACA,GAAIiB,CAAAA,eAAe,CAAGO,IAAI,CAAG,CAA7B,CACA,GAAIN,CAAAA,gBAAgB,CAAGD,eAAe,CAAG,CAAzC,CAEAX,QAAQ,kBAAKD,UAAL,EACEH,WAAW,CAAEG,UAAU,CAACX,KAAX,CAAiB6B,KAAjB,CAAuBL,gBAAvB,CACuBD,eADvB,CADf,GAAR,CAGD,CARQ,CAQN,CAACZ,UAAU,CAACL,WAAZ,CARM,CAAT,CAQ6B;AAK9B,GAAMyB,CAAAA,yBAAyB,CAAG,QAA5BA,CAAAA,yBAA4B,CAAC/B,KAAD,CAAW,CAC1CY,QAAQ,kBAAKD,UAAL,EAAiBF,YAAY,CAAE,EAA/B,GAAR,CACAG,QAAQ,kBAAKD,UAAL,EAAiBF,YAAY,oBAAMT,KAAN,CAA7B,GAAR,CACF,CAHD,CAMD,GAAMgC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC7BrB,QAAQ,kBAAKD,UAAL,EAAiBF,YAAY,CAAE,EAA/B,GAAR,CACA,GAAMyB,CAAAA,YAAY,CAAGD,KAAK,CAACE,MAAN,CAAaC,KAAlC,CACA/C,KAAK,CAACyB,GAAN,CAAU,qBAAV,CAAiC,CAACuB,MAAM,CAAE,CAACH,YAAY,CAAEA,YAAf,CAAT,CAAjC,EACGnB,IADH,CACQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACE,IAAJ,CAASU,MAAT,GAAoB,CAApB,CACIG,yBAAyB,CAACf,GAAG,CAACE,IAAL,CAD7B,CAEI,IAFR,EADX,EAIGC,KAJH,CAIS,SAAUmB,KAAV,CAAiB,CACtBjB,OAAO,CAACC,GAAR,CAAYgB,KAAZ,EACC,CANL,EAOC,CAVJ,CAcA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAC,IAAI,QACtB,gCACA,oBAAC,IAAD,MACE,oBAAC,UAAD,EACE,KAAK,CAAE,oBAAC,IAAD,EAAM,EAAE,CAAE,CAACC,QAAQ,CAAC,SAAWD,IAAI,CAACA,IAAL,CAAUE,GAA/B,CAAoCC,KAAK,CAAE,CAACH,IAAI,CAAJA,IAAD,CAA3C,CAAV,EACIA,IAAI,CAACA,IAAL,CAAUI,KADd,CADT,CAIE,SAAS,CACL,2BAAK,SAAS,CAAC,YAAf,EACE,2BAAK,SAAS,CAAC,SAAf,EACGtD,MAAM,CAACkD,IAAI,CAACA,IAAL,CAAUK,YAAX,CAAN,CAA+BC,MAA/B,CAAsC,wBAAtC,CADH,CADF,CAIE,2BAAK,SAAS,CAAC,SAAf,QAEE,oBAAC,IAAD,EAAM,KAAK,CAAE,CAACC,WAAW,CAAE,KAAd,CAAqBC,cAAc,CAAE,MAArC,CAAb,CACM,EAAE,CAAE,CAACP,QAAQ,CAAC,SAAWD,IAAI,CAACA,IAAL,CAAUS,MAA/B,CAAuCN,KAAK,CAAC,CAACH,IAAI,CAAJA,IAAD,CAA7C,CADV,EAEGA,IAAI,CAACA,IAAL,CAAUS,MAFb,CAFF,CAJF,CAWG,2BAAK,SAAS,CAAC,SAAf,EACC,yBAAG,SAAS,CAAC,gBAAb,aADD,CAEC,2BAAK,SAAS,CAAC,2BAAf,MAA6CT,IAAI,CAACA,IAAL,CAAUU,KAAvD,KAFD,CAXH,CALN,EADF,CAwBE,8BAxBF,CAyBE,oBAAC,WAAD,MACE,4BAAM,KAAK,CAAE,CAACC,QAAQ,CAAE,QAAX,CAAb,MAAsCX,IAAI,CAACA,IAAL,CAAUY,IAAhD,KADF,CAzBF,CADA,CADsB,EAAxB,CAkCA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACvB,IAAD,CAAU,CAC5BwB,MAAM,CAACC,QAAP,CAAgB,CAACC,GAAG,CAAC,CAAL,CAAQC,IAAI,CAAE,CAAd,CAAiBC,QAAQ,CAAE,QAA3B,CAAhB,EAEA;AACA,GAAIC,CAAAA,SAAS,CAAG7B,IAAI,CAAG,CAAvB,CACA,GAAI8B,CAAAA,SAAS,CAAG9B,IAAI,CAAG,CAAvB,CAEA;AACA;AACA,GAAGA,IAAI,CAAG,CAAP,EAAYA,IAAI,CAAGnB,UAAU,CAACP,QAAX,CAAsB,CAA5C,CAA+C,CAC7CQ,QAAQ,kBAAKD,UAAL,EACEL,WAAW,CAAEwB,IADf,CAEE3B,WAAW,CAAE,CAACyD,SAAS,CAAG,CAAb,CACCA,SADD,CAEC9B,IAFD,CAGC6B,SAHD,CAICA,SAAS,CAAG,CAJb,CAFf,GAAR,CAQA,CACD,GAAG7B,IAAI,GAAK,CAAZ,CAAgB,CACdlB,QAAQ,kBAAKD,UAAL,EACCL,WAAW,CAAEwB,IADd,CAEE3B,WAAW,CAAE,CAACyD,SAAD,CACC9B,IADD,CAEC6B,SAFD,CAGCA,SAAS,CAAG,CAHb,CAICA,SAAS,CAAG,CAJb,CAFf,GAAR,CAQA,CACF;AACA,GAAG7B,IAAI,GAAK,CAAZ,CAAe,CACblB,QAAQ,kBAAKD,UAAL,EACCL,WAAW,CAAEwB,IADd,CAEE3B,WAAW,CAAE,CAAC2B,IAAD,CACC6B,SADD,CAECA,SAAS,CAAG,CAFb,CAGCA,SAAS,CAAG,CAHb,CAICA,SAAS,CAAG,CAJb,CAFf,GAAR,CAQD,CACD;AACA,GAAG7B,IAAI,GAAKnB,UAAU,CAACP,QAAvB,CAAiC,CAC/BQ,QAAQ,kBAAKD,UAAL,EACEL,WAAW,CAAEwB,IADf,CAEE3B,WAAW,CAAE,CAACyD,SAAS,CAAG,CAAb,CACCA,SAAS,CAAG,CADb,CAECA,SAAS,CAAG,CAFb,CAGCA,SAHD,CAIC9B,IAJD,CAFf,GAAR,CAQD,CACD,GAAGA,IAAI,GAAKnB,UAAU,CAACP,QAAX,CAAsB,CAAlC,CAAqC,CACnCQ,QAAQ,kBAAKD,UAAL,EACEL,WAAW,CAAEwB,IADf,CAEE3B,WAAW,CAAE,CAACyD,SAAS,CAAG,CAAb,CACCA,SAAS,CAAG,CADb,CAECA,SAFD,CAGC9B,IAHD,CAIC6B,SAJD,CAFf,GAAR,CAQD,CACF,CA7DF,CAiEA,MACI,gCACA,2BAAK,KAAK,CAAE,CAACE,OAAO,CAAElD,UAAU,CAACkD,OAArB,CAA8BC,UAAU,CAAE,iBAA1C,CAAZ,EACA,8BADA,CAEE/D,OAAO,CAACgE,SAAR,CACG,oBAAC,IAAD,EAAM,EAAE,CAAC,UAAT,EACG,oBAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,KAAK,CAAC,SAAlC,aADH,CADH,CAME,oBAAC,IAAD,EAAM,EAAE,CAAC,SAAT,EACI,oBAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,KAAK,CAAC,SAAlC,wBADJ,CARJ,CADA,CAgBA,8BAhBA,CAiBA,oBAAC,SAAD,EACE,EAAE,CAAC,QADL,CAEE,KAAK,CAAC,QAFR,CAGE,MAAM,CAAC,QAHT,CAIE,QAAQ,CAAE/B,YAJZ,EAjBA,CAuBA,8BAvBA,CAwBC,8BAAQ,OAAO,CAAE,yBAAMX,CAAAA,OAAO,CAACC,GAAR,CAAYX,UAAZ,CAAN,EAAjB,aAxBD,CAyBC,8BAAQ,OAAO,CAAE,yBAAMU,CAAAA,OAAO,CAACC,GAAR,CAAYvB,OAAZ,CAAN,EAAjB,aAzBD,CA0BC,8BA1BD,CA2BC,+BACGY,UAAU,CAACF,YAAX,CACGE,UAAU,CAACF,YAAX,CAAwBuD,GAAxB,CAA4B,SAAAxB,IAAI,QAChC,qBAAC,WAAD,EAAa,GAAG,CAAEA,IAAI,CAACE,GAAL,CAAW,IAA7B,CAAmC,IAAI,CAAEF,IAAzC,EADgC,EAAhC,CADH,CAII,IALP,CA3BD,CAoCA,sCApCA,CAqCE,+BACG7B,UAAU,CAACH,WAAX,CACGG,UAAU,CAACH,WAAX,CAAuBwD,GAAvB,CAA2B,SAAAxB,IAAI,QAC/B,qBAAC,WAAD,EAAa,GAAG,CAAEA,IAAI,CAACE,GAAvB,CAA4B,IAAI,CAAEF,IAAlC,EAD+B,EAA/B,CADH,CAIG,IALN,CArCF,CA6CE,+BACI,2BAAK,SAAS,CAAC,SAAf,EACI,8BAAQ,OAAO,CAAE,yBAAMa,CAAAA,WAAW,CAAC,CAAD,CAAjB,EAAjB,YADJ,CAEI,8BAAQ,OAAO,CAAE,yBAAMA,CAAAA,WAAW,CAAC1C,UAAU,CAACL,WAAX,CAAyB,CAA1B,CAAjB,EAAjB,WAFJ,CAGQK,UAAU,CAACR,WAAX,CAAuB6D,GAAvB,CAA2B,SAAClC,IAAD,QACxB,4BACE,OAAO,CAAE,yBAAMuB,CAAAA,WAAW,CAACvB,IAAD,CAAjB,EADX,CAEE,SAAS,CAAEnB,UAAU,CAACL,WAAX,GAA2BwB,IAA3B,CACK,mBADL,CAEK,iBAJlB,CAKE,GAAG,CAAEA,IALP,EAMKA,IANL,CADwB,EAA3B,CAHR,CAaK,8BAAQ,OAAO,CAAE,yBAAMuB,CAAAA,WAAW,CAAC1C,UAAU,CAACL,WAAX,CAAyB,CAA1B,CAAjB,EAAjB,WAbL,CAcK,8BAAQ,OAAO,CAAE,yBAAM+C,CAAAA,WAAW,CAAC1C,UAAU,CAACP,QAAZ,CAAjB,EAAjB,WAdL,CADJ,CA7CF,CADJ,CAiEE,CA/OF,CAkPA,cAAeP,CAAAA,KAAf","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\n\nimport { Link } from 'react-router-dom';\n\nimport axios from 'axios';\nimport moment from 'moment';\nimport Context from '../utils/context';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\n\nimport '../App.css';\nimport '../styles/pagination.css';\n\n\n\n\nconst Posts = (props) => {\nconst context = useContext(Context)\n\n\nconst [stateLocal, setState] = useState({ posts: [],\n                                          fetched: false,\n                                          first_page_load: false,\n                                          pages_slice: [1, 2, 3, 4, 5],\n                                          max_page: null,\n                                          items_per_page: 3,\n\n                                          currentPage: 1,\n                                          num_posts: null,\n                                          posts_slice: null,\n                                          posts_search: [],\n                                          posts_per_page: 3\n                                      })\n\n\n  useEffect(() => {\n   if(!context.postsState) {\n      axios.get('/api/get/allposts')\n        .then(res => context.handleAddPosts(res.data) )\n        .catch((err) => console.log(err))\n      }\n    if (context.postsState && !stateLocal.fetched) {\n      const indexOfLastPost = 1 * stateLocal.posts_per_page\n      const indexOfFirstPost = indexOfLastPost - stateLocal.posts_per_page\n      const last_page = Math.ceil(context.postsState.length/stateLocal.posts_per_page)\n\n      setState({...stateLocal,\n                fetched: true,\n                posts: [...context.postsState],\n                num_posts: context.postsState.length,\n                max_page: last_page,\n                posts_slice: context.postsState.slice(indexOfFirstPost,\n                                                      indexOfLastPost)\n                })\n      }\n    }, [context, stateLocal])\n\n\n  useEffect(() => {\n    let page = stateLocal.currentPage\n    let indexOfLastPost = page * 3;\n    let indexOfFirstPost = indexOfLastPost - 3;\n\n    setState({...stateLocal,\n              posts_slice: stateLocal.posts.slice(indexOfFirstPost,\n                                                  indexOfLastPost) })\n  }, [stateLocal.currentPage]) //eslint-disable-line\n\n\n\n\n const add_search_posts_to_state = (posts) => {\n    setState({...stateLocal, posts_search: []});\n    setState({...stateLocal, posts_search: [...posts]});\n }\n\n\nconst handleSearch = (event) => {\n   setState({...stateLocal, posts_search: []});\n   const search_query = event.target.value\n   axios.get('/api/get/searchpost', {params: {search_query: search_query} })\n     .then(res => res.data.length !== 0\n                    ? add_search_posts_to_state(res.data)\n                    : null )\n     .catch(function (error) {\n       console.log(error);\n       })\n   }\n\n\n\nconst RenderPosts = post => (\n  <div >\n  <Card >\n    <CardHeader\n      title={<Link to={{pathname:'/post/' + post.post.pid, state: {post}}}>\n                {post.post.title}\n              </Link> }\n      subheader={\n          <div className=\"FlexColumn\">\n            <div className=\"FlexRow\">\n            {  moment(post.post.date_created).format('MMMM Do, YYYY | h:mm a') }\n            </div>\n            <div className=\"FlexRow\">\n              By:\n              <Link style={{paddingLeft: '5px', textDecoration: 'none'}}\n                    to={{pathname:\"/user/\" + post.post.author, state:{post} }}>\n               { post.post.author }\n               </Link>\n             </div>\n             <div className=\"FlexRow\">\n              <i className=\"material-icons\">thumb_up</i>\n              <div className=\"notification-num-allposts\"> {post.post.likes} </div>\n            </div>\n          </div>\n          }\n        />\n    <br />\n    <CardContent>\n      <span style={{overflow: 'hidden' }}> {post.post.body} </span>\n    </CardContent>\n  </Card>\n  </div>\n)\n\nconst page_change = (page) => {\n  window.scrollTo({top:0, left: 0, behavior: 'smooth'})\n\n  //variables for page change\n  let next_page = page + 1\n  let prev_page = page - 1\n\n  //handles general page change\n  //if(state.max_page < 5 return null)\n  if(page > 2 && page < stateLocal.max_page - 1) {\n    setState({...stateLocal,\n              currentPage: page,\n              pages_slice: [prev_page - 1,\n                            prev_page,\n                            page,\n                            next_page,\n                            next_page + 1],\n            })\n   }\n   if(page === 2 ) {\n     setState({...stateLocal,\n              currentPage: page,\n               pages_slice: [prev_page,\n                             page,\n                             next_page,\n                             next_page + 1,\n                             next_page + 2],\n             })\n    }\n   //handles use case for user to go back to first page from another page\n   if(page === 1) {\n     setState({...stateLocal,\n              currentPage: page,\n               pages_slice: [page,\n                             next_page,\n                             next_page + 1,\n                             next_page + 2,\n                             next_page + 3],\n          })\n   }\n   //handles last page change\n   if(page === stateLocal.max_page) {\n     setState({...stateLocal,\n               currentPage: page,\n               pages_slice: [prev_page - 3,\n                             prev_page - 2,\n                             prev_page - 1,\n                             prev_page,\n                             page],\n             })\n   }\n   if(page === stateLocal.max_page - 1) {\n     setState({...stateLocal,\n               currentPage: page,\n               pages_slice: [prev_page - 2,\n                             prev_page - 1,\n                             prev_page,\n                             page,\n                             next_page],\n             })\n   }\n }\n\n\n\nreturn(\n    <div>\n    <div style={{opacity: stateLocal.opacity, transition: 'opacity 2s ease'}}>\n    <br />\n    { context.authState\n      ?  <Link to=\"/addpost\">\n            <Button variant=\"contained\" color=\"primary\">\n              Add Post\n            </Button>\n          </Link>\n      : <Link to=\"/signup\">\n            <Button variant=\"contained\" color=\"primary\">\n              Sign Up to Add Post\n            </Button>\n          </Link>\n        }\n    </div>\n    <br />\n    <TextField\n      id=\"search\"\n      label=\"Search\"\n      margin=\"normal\"\n      onChange={handleSearch}\n    />\n    <hr />\n     <button onClick={() => console.log(stateLocal)}> Button </button>\n     <button onClick={() => console.log(context)}> Button </button>\n     <br />\n     <div>\n       {stateLocal.posts_search\n         ? stateLocal.posts_search.map(post =>\n           <RenderPosts key={post.pid + 1000} post={post} />\n          )\n          : null\n        }\n      </div>\n\n    <h1>Posts</h1>\n      <div>\n        {stateLocal.posts_slice\n          ? stateLocal.posts_slice.map(post =>\n            <RenderPosts key={post.pid} post={post} />\n           )\n          : null\n         }\n      </div>\n      <div>\n          <div className=\"FlexRow\">\n              <button onClick={() => page_change(1) }> First </button>\n              <button onClick={() => page_change(stateLocal.currentPage - 1) }> Prev </button>\n                 {stateLocal.pages_slice.map((page) =>\n                     <div\n                       onClick={() => page_change(page)}\n                       className={stateLocal.currentPage === page\n                                     ? \"pagination-active\"\n                                     : \"pagination-item\" }\n                       key={page}>\n                         {page}\n                      </div>\n                 )}\n               <button onClick={() => page_change(stateLocal.currentPage + 1)}> Next </button>\n               <button onClick={() => page_change(stateLocal.max_page)}> Last </button>\n             </div>\n       </div>\n    </div>\n)}\n\n\nexport default Posts;\n"]},"metadata":{},"sourceType":"module"}